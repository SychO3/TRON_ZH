# 账户

波场采用账户模式。
地址是账户的唯一标识符，操作账户需要私钥签名。
账户有许多属性，包括 TRX 和 TRC10 通证数量、带宽、能量等。
账户可以发送交易以增加或减少其 TRX 或 TRC10 通证数量，部署智能合约，并触发自己或他人发布的智能合约。
所有波场账户都可以申请成为超级代表或投票选举当选的超级代表。账户是波场上所有活动的基础。

## 账户类型

波场有两种账户类型：

- **普通账户** - 即外部拥有的账户，由拥有私钥的任何人控制。
- **合约账户** - 部署在波场网络上并由代码控制的智能合约。没有人拥有合约账户的私钥。

这两种账户类型都可以：

- 接收、持有和发送 TRX 或通证
- 与已部署的智能合约互动

## 账户和密钥对

帐户由一对加密密钥组成：公钥和私钥。
公钥可以映射到地址，而私钥用于签名交易。该密钥对有助于证明交易确实由发送者签名并防止伪造。

这可以防止恶意行为者发布虚假交易，因为总是可以验证交易的发送者。

例如，当 Alice 想要从自己的账户向 Bob 的账户发送 TRX 时，
她需要创建一个交易并将其发送到波场网络进行验证。
有了密钥对，Alice 就能证明她最初发起了交易请求。
如果没有加密机制，恶意行为者 Eve 可能会公开广播类似的请求，
即 "从 Alice 的账户向 Eve 的账户发送 5 TRX"，而没有人能够验证该交易请求是否由 Alice 本人提出。

## 创建外部账户

波场的密钥对生成算法与以太坊完全相同，
后者使用的是椭圆曲线数字签名算法 `ECDSA-secp256k1`。
密钥对的生成过程是首先，生成一个由 `64` 个十六进制字符组成的随机私钥。
然后，根据椭圆曲线数字签名算法从私钥生成公钥。
最后，提取公钥的 `Keccak-256` 结果的最后 `20` 个字节，并在十六进制格式地址前加上 `41`。

### 账户地址格式

除了 Hex 格式之外，波场网络账户地址还有 Base58 格式。

- Hex

与由相同私钥生成的六进制格式保存地址和以太坊地址相比，除了前 41 个字符外，其他都完全相同。

```
418840E6C55B9ADA326D211D818C34A994AECED808
```

!!! note
    以十六进制格式显示的波场地址去掉前导 `41` 即可得到以太坊地址。

- Base58

Base58 地址可以通过十六进制地址的基校验计算获得。所有 Base58 地址都以 T 开头，例如

```
TNPeeaaFB7K9cmo4uQpcU32zGK8G1NYqeL
```

使用 tronweb 进行 Hex 和 Base58 格式转换的示例：

```javascript
tronWeb.address.toHex("TNPeeaaFB7K9cmo4uQpcU32zGK8G1NYqeL")
> "418840E6C55B9ADA326D211D818C34A994AECED808"

tronWeb.address.fromHex("418840E6C55B9ADA326D211D818C34A994AECED808")
> "TNPeeaaFB7K9cmo4uQpcU32zGK8G1NYqeL"
```

### 创建帐户的方法

用户可以通过以下方式创建账户。即生成私钥和相应的地址。

- 使用命令行钱包 wallet-cli 离线创建账户

```javascript
wallet> GenerateAddress
{
    "address": "TU6JdEDQGPus64LTMksvnxF2cv4FQrXPCa",
    "privateKey": "b1ba1db577a36421924a87026cda27523851c6e88123d0a0a1def9a974376176"
}
```

- 以 TronWeb 为例，使用 SDK 离线创建一个账户：

```javascript
tronWeb.createAccount()
> address:
{
    base58: "TDpBe64DqirkKWj6HWuR1pWgmnhw2wDacE"
    hex: "412A2B9F7641D0750C1E822D0E49EF765C8106524B"
    privateKey: "427139B43028A492E2705BCC9C64172392B8DB59F3BA1AEDAE41C88924960091"
    publicKey:"0404B604296010A55D40000B798EE8454ECCC1F8900E70B1ADF47C9887625D8BAE3866351A6FA0B5370623268410D33D345F63344121455849C9C28F9389ED9731"
}
```

- 使用钱包应用程序创建私钥和地址

## 账户激活

新创建的账户不存在于链上，需要激活后才能通过 API 查询或链浏览器找到它们。
账户可以通过以下两种方式激活：

- 将任意数量的 TRX 或 TRC-10 通证从现有账户发送到新账户；
- 调用 Java-tron 的 `wallet/createaccountAPI` 从现有账户创建交易，然后签名交易并广播到波场网络。

激活新账户需支付 1TRX 的账户创建费。
除此之外，如果上述两笔交易的发送方有足够的质押 TRX 获得的带宽，
则创建账户只会消耗带宽，否则将燃烧 0.1TRX 来支付带宽。

或者，将 TRX 或 TRC-10 通证转移到智能合约中不活跃的账户地址也可以完成账户的激活。
这种方式除了正常合约调用消耗的带宽和能量外，只会额外消耗 25,000 能量，
并且不会消耗 1TRX 账户创建费和 0.1TRX 带宽。

## 合约账户

当智能合约部署到波场网络时，会返回相应的合约账户地址，
该地址是根据部署的合约交易ID和发送者账户地址计算得出的。
合约账户地址格式与外部账户相同：hex 或 Base58。例如：

```javascript
Base58: TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t
Hex:    41A614F803B6FD780986A42C78EC9C7F77E6DED13C
```
